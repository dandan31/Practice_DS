{"filter":false,"title":"sanple.rb","tooltip":"/Practice/sanple.rb","ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":15,"column":21},"end":{"row":15,"column":75},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"bb9640b2003c27e4bd63562d06c11984139db792","mime":"text/x-script.ruby","undoManager":{"mark":3,"position":3,"stack":[[{"start":{"row":0,"column":0},"end":{"row":40,"column":25},"action":"insert","lines":["require 'net/http'","require 'json'","require \"csv\"","","# 初期設定","KEYID = \"メールに記載されていたアクセスキーをここに入力\"","COUNT = 100","PREF = \"Z011\"","FREEWORD = \"渋谷駅\"","FORMAT = \"json\"","PARAMS = {\"key\": KEYID, \"count\":COUNT, \"large_area\":PREF, \"keyword\":FREEWORD, \"format\":FORMAT}","","def write_data_to_csv(params)","","    restaurants = [[\"名称\",\"営業日\",\"住所\",\"アクセス\"]]","    uri = URI.parse(\"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/\")","    uri.query = URI.encode_www_form(PARAMS)  ","","    json_res = Net::HTTP.get uri","    ","    # JSON.load(response)","    response = JSON.load(json_res)","    ","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    for restaurant in response[\"results\"][\"shop\"] do","        rest_info = [restaurant[\"name\"], restaurant[\"open\"], restaurant[\"address\"], restaurant[\"access\"]]","        puts rest_info","        restaurants.append(rest_info)","    end","    ","    CSV.open(\"restaurants_list.csv\", \"w\") do |csv|","        restaurants.each do |rest_info|","            csv << rest_info","        end","    end","    return puts restaurants","end","","write_data_to_csv(PARAMS)"],"id":1}],[{"start":{"row":5,"column":11},"end":{"row":5,"column":32},"action":"remove","lines":["ルに記載されていたアクセスキーをここに入力"],"id":2},{"start":{"row":5,"column":10},"end":{"row":5,"column":11},"action":"remove","lines":["ー"]}],[{"start":{"row":5,"column":9},"end":{"row":5,"column":10},"action":"remove","lines":["メ"],"id":3}],[{"start":{"row":5,"column":9},"end":{"row":5,"column":25},"action":"insert","lines":["edd4864d20757c52"],"id":4}]]},"timestamp":1629447892009}